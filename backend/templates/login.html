{% extends 'base.html' %}
{% block title %}Login{% endblock %}
{% block head %}
<style>
  body {
    background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
    min-height: 100vh;
  }
  .card-modern {
    border-radius: 1.5rem;
    box-shadow: 0 4px 24px 0 rgba(34, 60, 80, 0.16);
    background: #fff;
    padding: 2rem 2rem 1.5rem 2rem;
  }
  .btn-modern {
    border-radius: 2rem;
    font-weight: 500;
    letter-spacing: 0.03em;
    transition: background 0.2s;
  }
  .btn-modern:hover {
    background: #0d6efd;
    color: #fff;
  }
</style>
{% endblock %}
{% block content %}
<div class="d-flex justify-content-center align-items-center min-vh-100" style="background:linear-gradient(135deg,#232526 0%,#414345 100%);font-family:'Poppins',Arial,sans-serif;">
  <div class="card card-modern shadow-lg" style="width: 380px; background:rgba(255,255,255,0.13);backdrop-filter:blur(12px);border-radius:2rem;border:1px solid rgba(255,255,255,0.18);box-shadow:0 8px 32px 0 rgba(31,38,135,0.37);">
    <div class="card-body p-3">
      <h3 class="card-title text-center mb-4 text-primary">Login</h3>
      <form method="post" novalidate>
        {{ form.csrf_token }}
        <div class="mb-3">
          {{ form.email.label(class="form-label") }}
          {{ form.email(class="form-control", placeholder="Enter your email", autofocus=True, required=True, aria_describedby="emailHelp") }}
          {% for error in form.email.errors %}
            <div class="text-danger small">{{ error }}</div>
          {% endfor %}
        </div>
        <div class="mb-3">
          {{ form.password.label(class="form-label") }}
          {{ form.password(class="form-control", placeholder="Enter your password", required=True) }}
          {% for error in form.password.errors %}
            <div class="text-danger small">{{ error }}</div>
          {% endfor %}
        </div>
        <button type="submit" class="btn btn-modern w-100 mb-2" style="background:linear-gradient(90deg,#1fa2ff 0%,#12d8fa 100%);color:#fff;font-weight:600;box-shadow:0 2px 12px 0 rgba(31,38,135,0.17);"><i class="bi bi-box-arrow-in-right me-2"></i>Login</button>
        <div class="d-flex justify-content-between mb-2">
          <a href="/register" class="btn btn-link p-0">Register</a>
          <a href="/forgot_password" class="btn btn-link p-0">Forgot?</a>
        </div>
        <p class="mt-2 mb-0 small text-center">Don't have an account? <a href="{{ url_for('register') }}">Register here</a>.</p>
        {% if not admin_exists %}
        <p class="mt-1 text-danger small text-center"><strong>No admin?</strong> <a href="{{ url_for('admin_register') }}">Register the first admin here</a>.</p>
        {% endif %}
      </form>
      {% with messages = get_flashed_messages() %}
      {% if messages %}
      <div class="alert alert-warning mt-3 py-2 px-3 small text-center">{{ messages[0] }}</div>
      {% endif %}
      {% endwith %}
    </div>
  </div>
</div>
{% endblock %}

